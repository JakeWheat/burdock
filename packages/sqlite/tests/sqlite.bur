
use package "packages/sqlite"

include sqlite.sqlite

import from lists:
  map
end

include option

check "trivial":

  h = open(":memory:")
  command(h, "create table t1(a int)", empty)

  for map(i from [list: 1,2,3,4]):
    command(h, "insert into t1 values (?)", [list: sql-number(i)])
  end

  lst = query-as-list(h, "select * from t1", empty)
  lst is map({(x): [list:sql-number(x)]}, [list: 1,2,3,4])
  close(h)

end
