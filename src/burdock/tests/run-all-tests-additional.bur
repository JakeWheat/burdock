
# test the ffi example, plus temporarily the python until the concurrency is fixed

include filesystem
import from lists:
  map,
  filter,
  not-elem
end

include testing

fun my-ld(dir):
  glob(dir + "**/*.bur") + glob(dir + "**/*.rst")
end

srcs = my-ld("src/packages/ffitypes-test")

ts = run-tests-with-opts(default-test-opts.{test-sources:map(file-test(_), srcs),
                                       show-progress-log:true,
                                       print-results:true,
                                       hide-successes:true
                                      })

when has-test-failures(ts):
  _internals.sysexit(1)
end
